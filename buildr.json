{
  "project": {
    "name": "project-a",
    "version": "layer2-feat-branch",
    "revisionCommand": "git log -n 1 | grep commit | cut -d' ' -f2"
  },
  "build": {
    "environment": "ts-nms-bamboo-agent:1.7",
    "folder": "build",
    "command": "docker run -v src:{{ folder }} {{ docker_server }}/{{ environment }} {{ folder }}/build.sh"
  },
  "dependencies": [
    {
      "folder": "project_b",
      "checkout": "git clone --branch 3.1.0 {{ git_server }}/project-b.git {{ build.folder }}/{{ folder }}"
    }
  ],
  "repositories": [
    {
      "name": "my_yum_repo",
      "publish": "jfrog rt u {{ build.folder}/**/*.rpm {{ artifactory }} {{ name }} --props name={{ project.name }};version={{ project.version }};vcsRevision={{ project.revisionCommand.out }}",
      "resolve": "jfrog rt dl *.rpm --props name={{ project.name }};version={{ project.version }};vcsRevision={{ project.revisionCommand.out }} {{ artifactory }} {{ name }} {{ dependency_folder }}"
    }
  ]
}
